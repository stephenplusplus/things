(function(e){var n=function(e,n){return typeof e===n},t=function(e){return!r(e)},r=function(e){return n(e,"undefined")},o=function(e){return n(e,"function")},i=function(e){return n(e,"string")},u=function(){var n=Array.prototype.forEach,u=function(n){return r(n)?void 0:e.jQuery?e.jQuery(n).find.bind(e.jQuery(n)):n.querySelectorAll.bind(n)};return function(){var c={matches:null,find:function(e){var n,r=u(c.matches[0]);return o(r)&&(n=r(e)),t(n)&&t(n[0])&&(c.matches=n),c},html:function(e){return i(e)&&n.call(c.matches,function(n){return i(e)?n.innerHTML=e:void 0}),r(e)?c.matches[0].innerHTML:void 0}};return c.matches=u(e.document.body)(arguments[0]),c}}(),c=["route","service","thing"],d={},a={},p=function(e,n){if(!t(e.route[n].__datael)){var r=u('[data-route="'+n+'"]'),o=r.find("[data-eL]");e.route[n].__dataroute=r,e.route[n].__datael=o.matches[0]?o:r}},f=function(e,n){return e.route[n].__datael},y=function(e,n,t,r){var i=e[n][t]=r;if(o(r)){var u=(""+r).match(/^\s*function\s*\((.*?)\)/);i.__dependencies=u&&""!==u[1]?u[1].replace(/\s/g,"").split(","):[]}"service"===n&&(i.__invoked=!1)},v=function(e,n,r){var o={dependencyType:void 0,dependency:void 0};if(!t(n)&&!t(r))return o;if(t(n)&&t(r)?(o.dependencyType=r,o.dependency=e[r][n]):o.dependency=c.filter(function(r){return t(e[r][n])?(o.dependencyType=r,e[r][n]):void 0})[0],!o.dependency||!o.dependencyType)throw Error(n+" doesn't appear to be a thing.");return o},_=function(e,n,t){var r=v(e,n,t).dependency,i=r?r.__dependencies:[],u="route"===t,c="service"===t,d=c&&r.__invoked;u&&(e.__incomingRoute=n),"eL"===n&&e.__incomingRoute!==e.__activeRoute&&(r=f(e,e.__incomingRoute));e:if(o(r)){if(d)break e;r=new r(_(e,i[0],v(e,i[0]).dependencyType),_(e,i[1],v(e,i[1]).dependencyType),_(e,i[2],v(e,i[2]).dependencyType),_(e,i[3],v(e,i[3]).dependencyType),_(e,i[4],v(e,i[4]).dependencyType),_(e,i[5],v(e,i[5]).dependencyType),_(e,i[6],v(e,i[6]).dependencyType),_(e,i[7],v(e,i[7]).dependencyType),_(e,i[8],v(e,i[8]).dependencyType),_(e,i[9],v(e,i[9]).dependencyType)),c&&(y(e,"service",n,r),e.service[n].__invoked=!0)}return u&&(e.__activeRoute=n),r};e.things=function(){var n=function(n){var r=a[n];if(t(r))return r;var o=d[n]={__incomingRoute:null,__activeRoute:null,route:{},service:{},thing:{},boot:{}},i=function(e){return function(n,t){y(o,e,n,t)}},c=function(e){return p(o,e),_(o,e,"route"),o},f=function(e){return y(o,"boot",(""+e).substr(10,30).replace(/[^\w]|\s/g,""),e),o};return y(o,"thing","root",window),y(o,"service","goTo",function(){return c}),y(o,"thing","eL",u),e.onload=function(){for(var e in o.boot)o.boot.hasOwnProperty(e)&&_(o,e,"boot")},a[n]={route:i("route"),service:i("service"),thing:i("thing"),goTo:c,boots:f}};return n}()})(window);