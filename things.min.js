(function(j){var f=function(a){return"undefined"===typeof a},l,p=Array.prototype.forEach,m=function(a){if(!f(a))return j.jQuery?j.jQuery(a).find.bind(j.jQuery(a)):a.querySelectorAll.bind(a)};l=function(a){var c={matches:null,find:function(a){var b=m(c.matches[0]),d;"function"===typeof b&&(d=b(a));!f(d)&&!f(d[0])&&(c.matches=d);return c},html:function(a){"string"===typeof a&&p.call(c.matches,function(b){if("string"===typeof a)return b.innerHTML=a});if(f(a))return c.matches[0].innerHTML}};c.matches=
m(j.document.body)(a);return c};var q=["route","service","thing"],r={},n={},k=function(a,c,e,b){a=a[c][e]=b;"function"===typeof b&&(b=b.toString().match(/^\s*function\s*\((.*?)\)/),a.__dependencies=b&&""!==b[1]?b[1].replace(/\s/g,"").split(","):[]);"service"===c&&(a.__invoked=!1)},h=function(a,c,e){var b={dependencyType:void 0,dependency:void 0};if(f(c)&&f(e))return b;!f(c)&&!f(e)?(b.dependencyType=e,b.dependency=a[e][c]):b.dependency=q.filter(function(d){if(!f(a[d][c]))return b.dependencyType=d,
a[d][c]})[0];if(!b.dependency||!b.dependencyType)throw Error(c+" doesn't appear to be a thing.");return b},g=function(a,c,e){var b=h(a,c,e).dependency,d=b?b.__dependencies:[],f="route"===e,j=(e="service"===e)&&b.__invoked;f&&(a.__incomingRoute=c);"eL"===c&&a.__incomingRoute!==a.__activeRoute&&(b=a.route[a.__incomingRoute].__datael);"function"===typeof b&&!j&&(b=new b(g(a,d[0],h(a,d[0]).dependencyType),g(a,d[1],h(a,d[1]).dependencyType),g(a,d[2],h(a,d[2]).dependencyType),g(a,d[3],h(a,d[3]).dependencyType),
g(a,d[4],h(a,d[4]).dependencyType),g(a,d[5],h(a,d[5]).dependencyType),g(a,d[6],h(a,d[6]).dependencyType),g(a,d[7],h(a,d[7]).dependencyType),g(a,d[8],h(a,d[8]).dependencyType),g(a,d[9],h(a,d[9]).dependencyType)),e&&(k(a,"service",c,b),a.service[c].__invoked=!0));f&&(a.__activeRoute=c);return b};j.things=function(a){var c=n[a];if(!f(c))return c;var e=r[a]={__incomingRoute:null,__activeRoute:null,route:{},service:{},thing:{},boot:{}},c=function(a){return function(b,c){k(e,a,b,c)}},b=function(a){if(f(e.route[a].__datael)){var b=
l('[data-route="'+a+'"]'),c=b.find("[data-eL]");e.route[a].__dataroute=b;e.route[a].__datael=c.matches[0]?c:b}g(e,a,"route");return e};k(e,"thing","root",window);k(e,"service","goTo",function(){return b});k(e,"thing","eL",l);j.onload=function(){for(var a in e.boot)e.boot.hasOwnProperty(a)&&g(e,a,"boot")};return n[a]={route:c("route"),service:c("service"),thing:c("thing"),goTo:b,boots:function(a){k(e,"boot",a.toString().substr(10,30).replace(/[^\w]|\s/g,""),a);return e}}}})(window);